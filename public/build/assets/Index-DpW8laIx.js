import{_ as N}from"./AuthenticatedLayout-BtdOzac_.js";import{c as C,b as _,d as f,e as d,f as o,u as p,m as B,w as r,g as t,j as u,F as c,k as b,t as i,P as y,l as F}from"./app-B6c4nCTd.js";import"./ApplicationStore-Blr9INut.js";import"./ApplicationLogo-DeqSs-SK.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserRegular-BMmSYD_P.js";import"./AppMessageListener-C_L6u0ge.js";const q={class:"py-12"},A={class:"mx-auto max-w-[95%]"},E={class:"flex items-center justify-between px-4"},L={class:"text-green-600 font-semibold"},R={class:"text-red-600 font-semibold"},T={class:"flex flex-col gap-1 mt-2"},V=["href"],$=["href"],G={__name:"Index",props:{projects:Array,pagination:Object},setup(k){const w=k,D=C(()=>w.projects.filter(e=>!e.invoice_date)),h=e=>e?new Date(e).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}):"-",m=e=>e==null?"Rp 0":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),v=e=>!e||!e.length?0:e.reduce((n,s)=>n+s.qty*s.price,0),g=e=>!e||!e.length?0:e.reduce((n,s)=>n+Number(s.amount),0);return(e,n)=>{const s=_("n-button"),I=_("n-table"),x=_("n-card");return d(),f(c,null,[o(p(B),{title:"Projects"}),o(N,null,{default:r(()=>[t("div",q,[t("div",A,[t("div",E,[n[2]||(n[2]=t("h1",{class:"text-2xl font-bold"},"Projects",-1)),o(s,{type:"primary",onClick:n[0]||(n[0]=l=>e.$inertia.visit(e.route("create.projects")))},{default:r(()=>n[1]||(n[1]=[u(" Add Project ")])),_:1})]),o(x,{class:"mt-4 overflow-x-auto text-nowrap"},{default:r(()=>[o(I,{"single-line":!1},{default:r(()=>[n[9]||(n[9]=t("thead",null,[t("tr",null,[t("th",null,"No."),t("th",null,"Client"),t("th",null,"Phone"),t("th",null,"Items"),t("th",null,"Total"),t("th",null,"Paid"),t("th",null,"Remaining"),t("th",null,"Event Date"),t("th",null,"Action")])],-1)),t("tbody",null,[(d(!0),f(c,null,b(D.value,(l,P)=>(d(),f("tr",{key:l.id},[t("td",null,i(P+1),1),t("td",null,i(l.client),1),t("td",null,i(l.phone),1),t("td",null,[t("ul",null,[(d(!0),f(c,null,b(l.items,a=>(d(),f("li",{key:a.id},[u(i(a.name)+" ("+i(a.qty)+"x) - "+i(m(a.price))+" = ",1),t("strong",null,i(m(a.qty*a.price)),1)]))),128))])]),t("td",null,[t("strong",null,i(m(v(l.items))),1)]),t("td",null,[t("span",L,i(m(g(l.payments))),1)]),t("td",null,[t("span",R,i(m(v(l.items)-g(l.payments))),1)]),t("td",null,i(h(l.event_start))+" - "+i(h(l.event_end)),1),t("td",null,[o(p(y),{href:e.route("edit.projects",l.id),class:"mr-2"},{default:r(()=>[o(s,{type:"primary"},{default:r(()=>n[3]||(n[3]=[u("Edit")])),_:1})]),_:2},1032,["href"]),o(p(y),{href:e.route("destroy.projects",l.id),method:"delete",class:"mr-2"},{default:r(()=>[o(s,{type:"error"},{default:r(()=>n[4]||(n[4]=[u("Delete")])),_:1})]),_:2},1032,["href"]),t("div",T,[l.invoice_date?(d(),f(c,{key:1},[o(p(y),{href:e.route("projects.send-invoice",l.id),method:"post"},{default:r(()=>[o(s,{type:"info",block:""},{default:r(()=>n[6]||(n[6]=[u("Kirim Ulang Invoice")])),_:1})]),_:2},1032,["href"]),t("a",{href:e.route("projects.invoice.view",l.id),target:"_blank"},[o(s,{type:"success",block:""},{default:r(()=>n[7]||(n[7]=[u("Lihat Invoice")])),_:1})],8,V),t("a",{href:e.route("projects.invoice.download",l.id)},[o(s,{type:"warning",block:""},{default:r(()=>n[8]||(n[8]=[u("Download Invoice")])),_:1})],8,$)],64)):(d(),F(p(y),{key:0,href:e.route("projects.send-invoice",l.id),method:"post"},{default:r(()=>[o(s,{type:"info",block:""},{default:r(()=>n[5]||(n[5]=[u("Kirim Invoice")])),_:1})]),_:2},1032,["href"]))])])]))),128))])]),_:1})]),_:1})])])]),_:1})],64)}}};export{G as default};
