import{r as J,C as O,b as m,d as f,e as v,f as a,u as n,m as G,w as s,g as o,h as K,F as g,k as N,l as T,n as B,j as y}from"./app-Bwy_4daj.js";import{_ as Q}from"./AuthenticatedLayout-DDKMNgpr.js";import"./ApplicationStore-CiGgDIo8.js";import"./ApplicationLogo-ChffNIeG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserRegular-Bz77nhvw.js";import"./AppMessageListener-CjFbQNLg.js";const W={class:"py-12"},X={class:"mx-auto max-w-[90%]"},Y={class:"border p-4 rounded-md mb-4"},Z={class:"md:col-span-5"},ee={class:"md:col-span-2"},te={class:"md:col-span-3"},le={class:"md:col-span-2 flex md:justify-end"},ae={class:"border p-4 rounded-md mb-4"},ne={class:"md:col-span-3"},oe={class:"md:col-span-3"},se={class:"md:col-span-3"},de={class:"md:col-span-2"},re={class:"md:col-span-1 flex md:justify-end"},ue={class:"flex justify-end"},ye={__name:"Form",props:{project:Object},setup(F){var k,U,C,w,x,P,M,E,V,q;const r=F,j=J(null),l=O({client:((k=r.project)==null?void 0:k.client)??"",phone:((U=r.project)==null?void 0:U.phone)??"",email:((C=r.project)==null?void 0:C.email)??"",venue:((w=r.project)==null?void 0:w.venue)??"",address:((x=r.project)==null?void 0:x.address)??"",event_start:((P=r.project)==null?void 0:P.event_start)??null,event_end:((M=r.project)==null?void 0:M.event_end)??null,items:((E=r.project)==null?void 0:E.items)??[{name:"",qty:1,price:0}],payments:((V=r.project)==null?void 0:V.payments)??[{type:"down_payment",amount:0,payment_date:null,method:""}],description:((q=r.project)==null?void 0:q.description)??""}),I=()=>{l.payments.push({type:"installment",amount:0,payment_date:null,method:""})},A=u=>{l.payments.splice(u,1)},D={client:{required:!0,validator:(u,e)=>e?!0:new Error("Client is required")},phone:{required:!0,validator:(u,e)=>e?!0:new Error("Phone is required")},items:{validator:(u,e)=>e.length>0?!0:new Error("Minimal 1 item")}},S=()=>{l.items.push({name:"",qty:1,price:0})},H=u=>{l.items.splice(u,1)},L=()=>{var u;(u=j.value)==null||u.validate(e=>{e||(r.project?(console.log(l),l.post(route("update.projects",{project:r.project.id}))):(console.log(l),l.post(route("store.projects"))))})};return(u,e)=>{const p=m("n-input"),i=m("n-form-item"),b=m("n-date-picker"),h=m("n-input-number"),c=m("n-button"),$=m("n-select"),R=m("n-form"),z=m("n-card");return v(),f(g,null,[a(n(G),{title:"Projects"}),a(Q,null,{default:s(()=>[o("div",W,[o("div",X,[e[15]||(e[15]=o("div",{class:"flex items-center justify-between px-4"},[o("h1",{class:"text-2xl font-bold"},"Form Project")],-1)),a(z,{class:"mt-4"},{default:s(()=>[a(R,{ref_key:"formRef",ref:j,model:n(l),rules:D,onSubmit:K(L,["prevent"])},{default:s(()=>[a(i,{path:"client",label:"Client"},{default:s(()=>[a(p,{value:n(l).client,"onUpdate:value":e[0]||(e[0]=t=>n(l).client=t),placeholder:"Nama Client"},null,8,["value"])]),_:1}),a(i,{path:"phone",label:"Phone"},{default:s(()=>[a(p,{value:n(l).phone,"onUpdate:value":e[1]||(e[1]=t=>n(l).phone=t),placeholder:"Nomor Telepon"},null,8,["value"])]),_:1}),a(i,{path:"email",label:"Email"},{default:s(()=>[a(p,{value:n(l).email,"onUpdate:value":e[2]||(e[2]=t=>n(l).email=t),placeholder:"Alamat Email"},null,8,["value"])]),_:1}),a(i,{path:"venue",label:"Venue"},{default:s(()=>[a(p,{value:n(l).venue,"onUpdate:value":e[3]||(e[3]=t=>n(l).venue=t),placeholder:"Lokasi Acara"},null,8,["value"])]),_:1}),a(i,{path:"address",label:"Address"},{default:s(()=>[a(p,{value:n(l).address,"onUpdate:value":e[4]||(e[4]=t=>n(l).address=t),placeholder:"Alamat Lengkap"},null,8,["value"])]),_:1}),a(i,{path:"event_start",label:"Event Start"},{default:s(()=>[a(b,{"formatted-value":n(l).event_start,"onUpdate:formattedValue":e[5]||(e[5]=t=>n(l).event_start=t),type:"date","value-format":"yyyy-MM-dd",placeholder:"Tanggal Mulai"},null,8,["formatted-value"])]),_:1}),a(i,{path:"event_end",label:"Event End"},{default:s(()=>[a(b,{"formatted-value":n(l).event_end,"onUpdate:formattedValue":e[6]||(e[6]=t=>n(l).event_end=t),type:"date","value-format":"yyyy-MM-dd",placeholder:"Tanggal Selesai"},null,8,["formatted-value"])]),_:1}),o("div",Y,[e[10]||(e[10]=o("h2",{class:"font-semibold mb-2"},"Items",-1)),(v(!0),f(g,null,N(n(l).items,(t,_)=>(v(),f("div",{key:_,class:"grid grid-cols-1 md:grid-cols-12 gap-2 items-center mb-2"},[o("div",Z,[a(p,{value:t.name,"onUpdate:value":d=>t.name=d,placeholder:"Nama Paket"},null,8,["value","onUpdate:value"])]),o("div",ee,[a(h,{value:t.qty,"onUpdate:value":d=>t.qty=d,min:1,placeholder:"Day"},null,8,["value","onUpdate:value"])]),o("div",te,[a(h,{value:t.price,"onUpdate:value":d=>t.price=d,min:0,placeholder:"Harga"},null,8,["value","onUpdate:value"])]),o("div",le,[n(l).items.length>1?(v(),T(c,{key:0,type:"error",onClick:d=>H(_),block:""},{default:s(()=>e[8]||(e[8]=[y(" Hapus ")])),_:2},1032,["onClick"])):B("",!0)])]))),128)),a(c,{type:"primary",onClick:S},{default:s(()=>e[9]||(e[9]=[y("Tambah Item")])),_:1})]),o("div",ae,[e[13]||(e[13]=o("h2",{class:"font-semibold mb-2"},"Payments",-1)),(v(!0),f(g,null,N(n(l).payments,(t,_)=>(v(),f("div",{key:_,class:"grid grid-cols-1 md:grid-cols-12 gap-2 items-center mb-2"},[o("div",ne,[a($,{value:t.type,"onUpdate:value":d=>t.type=d,options:[{label:"Down Payment",value:"down_payment"},{label:"Installment",value:"installment"},{label:"Final",value:"final"}],placeholder:"Jenis Pembayaran"},null,8,["value","onUpdate:value"])]),o("div",oe,[a(h,{value:t.amount,"onUpdate:value":d=>t.amount=d,min:0,placeholder:"Nominal"},null,8,["value","onUpdate:value"])]),o("div",se,[a(b,{"formatted-value":t.payment_date,"onUpdate:formattedValue":d=>t.payment_date=d,type:"date","value-format":"yyyy-MM-dd",placeholder:"Tanggal Bayar"},null,8,["formatted-value","onUpdate:formattedValue"])]),o("div",de,[a(p,{value:t.method,"onUpdate:value":d=>t.method=d,placeholder:"Metode"},null,8,["value","onUpdate:value"])]),o("div",re,[n(l).payments.length>1?(v(),T(c,{key:0,type:"error",onClick:d=>A(_),block:""},{default:s(()=>e[11]||(e[11]=[y(" Hapus ")])),_:2},1032,["onClick"])):B("",!0)])]))),128)),a(c,{type:"primary",onClick:I},{default:s(()=>e[12]||(e[12]=[y("Tambah Payment")])),_:1})]),a(i,{path:"description",label:"Description"},{default:s(()=>[a(p,{value:n(l).description,"onUpdate:value":e[7]||(e[7]=t=>n(l).description=t),type:"textarea",placeholder:"Deskripsi tambahan",rows:"5"},null,8,["value"])]),_:1}),o("div",ue,[a(c,{"attr-type":"submit",type:"primary",size:"large",disabled:n(l).processing},{default:s(()=>e[14]||(e[14]=[y(" Submit ")])),_:1},8,["disabled"])])]),_:1},8,["model"])]),_:1})])])]),_:1})],64)}}};export{ye as default};
