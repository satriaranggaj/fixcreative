import{_ as L}from"./AuthenticatedLayout-DDKMNgpr.js";import{c as P,b as c,d,e as a,f as i,u as f,m as B,w as s,g as t,F as p,k as C,t as r,l as v,P as _,j as u}from"./app-Bwy_4daj.js";import"./ApplicationStore-CiGgDIo8.js";import"./ApplicationLogo-ChffNIeG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserRegular-Bz77nhvw.js";import"./AppMessageListener-CjFbQNLg.js";const F={class:"py-12"},R={class:"mx-auto max-w-[95%]"},T={class:"text-green-600 font-semibold"},V={class:"text-red-600 font-semibold"},A={class:"flex flex-col gap-1 mt-2"},K=["href"],S=["href"],G={__name:"Index",props:{projects:Array,pagination:Object},setup(g){const k=g,D=P(()=>k.projects.filter(e=>e.invoice_date)),h=e=>e?new Date(e).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}):"-",I=(e,n=30)=>{if(!e)return"-";const l=new Date(e);return l.setDate(l.getDate()+n),h(l)},m=e=>e==null?"Rp 0":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),y=e=>!e||!e.length?0:e.reduce((n,l)=>n+l.qty*l.price,0),b=e=>!e||!e.length?0:e.reduce((n,l)=>n+Number(l.amount),0);return(e,n)=>{const l=c("n-button"),w=c("n-table"),x=c("n-card");return a(),d(p,null,[i(f(B),{title:"Invoices"}),i(L,null,{default:s(()=>[t("div",F,[t("div",R,[n[7]||(n[7]=t("div",{class:"px-4"},[t("h1",{class:"text-2xl font-bold"},"Invoice")],-1)),i(x,{class:"mt-4 overflow-x-auto text-nowrap"},{default:s(()=>[i(w,{"single-line":!1},{default:s(()=>[n[6]||(n[6]=t("thead",null,[t("tr",null,[t("th",null,"No."),t("th",null,"Client"),t("th",null,"Phone"),t("th",null,"Total"),t("th",null,"Paid"),t("th",null,"Remaining"),t("th",null,"Invoice Date"),t("th",null,"Due Date"),t("th",null,"Action")])],-1)),t("tbody",null,[(a(!0),d(p,null,C(D.value,(o,N)=>(a(),d("tr",{key:o.id},[t("td",null,r(N+1),1),t("td",null,r(o.client),1),t("td",null,r(o.phone),1),t("td",null,[t("strong",null,r(m(y(o.items))),1)]),t("td",null,[t("span",T,r(m(b(o.payments))),1)]),t("td",null,[t("span",V,r(m(y(o.items)-b(o.payments))),1)]),t("td",null,r(h(o.invoice_date)),1),t("td",null,r(I(o.invoice_date,30)),1),t("td",null,[t("div",A,[o.invoice_date?o.is_paid?(a(),v(l,{key:2,type:"success",block:"",disabled:""},{default:s(()=>n[5]||(n[5]=[u(" Sudah Lunas ")])),_:1})):(a(),d(p,{key:1},[i(f(_),{href:e.route("projects.send-invoice",o.id),method:"post"},{default:s(()=>[i(l,{type:"info",block:""},{default:s(()=>n[1]||(n[1]=[u("Kirim Ulang Invoice")])),_:1})]),_:2},1032,["href"]),t("a",{href:e.route("projects.invoice.view",o.id),target:"_blank"},[i(l,{type:"success",block:""},{default:s(()=>n[2]||(n[2]=[u("Lihat Invoice")])),_:1})],8,K),t("a",{href:e.route("projects.invoice.download",o.id)},[i(l,{type:"warning",block:""},{default:s(()=>n[3]||(n[3]=[u("Download Invoice")])),_:1})],8,S),i(f(_),{href:e.route("projects.mark-paid",o.id),method:"post",as:"button"},{default:s(()=>[i(l,{type:"primary",block:""},{default:s(()=>n[4]||(n[4]=[u("Lunas")])),_:1})]),_:2},1032,["href"])],64)):(a(),v(f(_),{key:0,href:e.route("projects.send-invoice",o.id),method:"post"},{default:s(()=>[i(l,{type:"info",block:""},{default:s(()=>n[0]||(n[0]=[u("Kirim Invoice")])),_:1})]),_:2},1032,["href"]))])])]))),128))])]),_:1})]),_:1})])])]),_:1})],64)}}};export{G as default};
