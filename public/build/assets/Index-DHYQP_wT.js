import{_ as N}from"./AuthenticatedLayout-BtdOzac_.js";import{c as P,b as m,d as u,e as a,f as s,u as f,m as B,w as i,g as t,F as p,k as C,t as r,l as F,P as g,j as d}from"./app-B6c4nCTd.js";import"./ApplicationStore-Blr9INut.js";import"./ApplicationLogo-DeqSs-SK.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserRegular-BMmSYD_P.js";import"./AppMessageListener-C_L6u0ge.js";const L={class:"py-12"},R={class:"mx-auto max-w-[95%]"},T={class:"text-green-600 font-semibold"},V={class:"text-red-600 font-semibold"},A={class:"flex flex-col gap-1 mt-2"},K=["href"],q=["href"],G={__name:"Index",props:{projects:Array,pagination:Object},setup(y){const b=y,D=P(()=>b.projects.filter(e=>e.invoice_date)),_=e=>e?new Date(e).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}):"-",I=(e,n=30)=>{if(!e)return"-";const l=new Date(e);return l.setDate(l.getDate()+n),_(l)},c=e=>e==null?"Rp 0":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),h=e=>!e||!e.length?0:e.reduce((n,l)=>n+l.qty*l.price,0),v=e=>!e||!e.length?0:e.reduce((n,l)=>n+Number(l.amount),0);return(e,n)=>{const l=m("n-button"),k=m("n-table"),w=m("n-card");return a(),u(p,null,[s(f(B),{title:"Invoices"}),s(N,null,{default:i(()=>[t("div",L,[t("div",R,[n[5]||(n[5]=t("div",{class:"px-4"},[t("h1",{class:"text-2xl font-bold"},"Invoice")],-1)),s(w,{class:"mt-4 overflow-x-auto text-nowrap"},{default:i(()=>[s(k,{"single-line":!1},{default:i(()=>[n[4]||(n[4]=t("thead",null,[t("tr",null,[t("th",null,"No."),t("th",null,"Client"),t("th",null,"Phone"),t("th",null,"Total"),t("th",null,"Paid"),t("th",null,"Remaining"),t("th",null,"Invoice Date"),t("th",null,"Due Date"),t("th",null,"Action")])],-1)),t("tbody",null,[(a(!0),u(p,null,C(D.value,(o,x)=>(a(),u("tr",{key:o.id},[t("td",null,r(x+1),1),t("td",null,r(o.client),1),t("td",null,r(o.phone),1),t("td",null,[t("strong",null,r(c(h(o.items))),1)]),t("td",null,[t("span",T,r(c(v(o.payments))),1)]),t("td",null,[t("span",V,r(c(h(o.items)-v(o.payments))),1)]),t("td",null,r(_(o.invoice_date)),1),t("td",null,r(I(o.invoice_date,30)),1),t("td",null,[t("div",A,[o.invoice_date?(a(),u(p,{key:1},[s(f(g),{href:e.route("projects.send-invoice",o.id),method:"post"},{default:i(()=>[s(l,{type:"info",block:""},{default:i(()=>n[1]||(n[1]=[d("Kirim Ulang Invoice")])),_:1})]),_:2},1032,["href"]),t("a",{href:e.route("projects.invoice.view",o.id),target:"_blank"},[s(l,{type:"success",block:""},{default:i(()=>n[2]||(n[2]=[d("Lihat Invoice")])),_:1})],8,K),t("a",{href:e.route("projects.invoice.download",o.id)},[s(l,{type:"warning",block:""},{default:i(()=>n[3]||(n[3]=[d("Download Invoice")])),_:1})],8,q)],64)):(a(),F(f(g),{key:0,href:e.route("projects.send-invoice",o.id),method:"post"},{default:i(()=>[s(l,{type:"info",block:""},{default:i(()=>n[0]||(n[0]=[d("Kirim Invoice")])),_:1})]),_:2},1032,["href"]))])])]))),128))])]),_:1})]),_:1})])])]),_:1})],64)}}};export{G as default};
