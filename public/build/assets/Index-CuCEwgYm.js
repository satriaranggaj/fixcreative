import{_ as N}from"./AuthenticatedLayout-DDKMNgpr.js";import{c as C,b as p,d as m,e as a,f as o,u as c,m as B,w as s,g as t,j as f,F as _,k as b,t as r,P as y,l as F,n as V}from"./app-Bwy_4daj.js";import"./ApplicationStore-CiGgDIo8.js";import"./ApplicationLogo-ChffNIeG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserRegular-Bz77nhvw.js";import"./AppMessageListener-CjFbQNLg.js";const q={class:"py-12"},A={class:"mx-auto max-w-[95%]"},E={class:"flex items-center justify-between px-4"},R={class:"text-green-600 font-semibold"},T={class:"text-red-600 font-semibold"},$={class:"flex flex-col gap-1 mt-2"},G={__name:"Index",props:{projects:Array,pagination:Object},setup(x){const D=x,k=C(()=>D.projects.filter(e=>!e.invoice_date)),h=e=>e?new Date(e).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}):"-",d=e=>e==null?"Rp 0":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),g=e=>!e||!e.length?0:e.reduce((n,u)=>n+u.qty*u.price,0),v=e=>!e||!e.length?0:e.reduce((n,u)=>n+Number(u.amount),0);return(e,n)=>{const u=p("n-button"),w=p("n-table"),I=p("n-card");return a(),m(_,null,[o(c(B),{title:"Projects"}),o(N,null,{default:s(()=>[t("div",q,[t("div",A,[t("div",E,[n[2]||(n[2]=t("h1",{class:"text-2xl font-bold"},"Projects",-1)),o(u,{type:"primary",onClick:n[0]||(n[0]=l=>e.$inertia.visit(e.route("create.projects")))},{default:s(()=>n[1]||(n[1]=[f(" Add Project ")])),_:1})]),o(I,{class:"mt-4 overflow-x-auto text-nowrap"},{default:s(()=>[o(w,{"single-line":!1},{default:s(()=>[n[6]||(n[6]=t("thead",null,[t("tr",null,[t("th",null,"No."),t("th",null,"Client"),t("th",null,"Phone"),t("th",null,"Items"),t("th",null,"Total"),t("th",null,"Paid"),t("th",null,"Remaining"),t("th",null,"Event Date"),t("th",null,"Action")])],-1)),t("tbody",null,[(a(!0),m(_,null,b(k.value,(l,P)=>(a(),m("tr",{key:l.id},[t("td",null,r(P+1),1),t("td",null,r(l.client),1),t("td",null,r(l.phone),1),t("td",null,[t("ul",null,[(a(!0),m(_,null,b(l.items,i=>(a(),m("li",{key:i.id},[f(r(i.name)+" ("+r(i.qty)+"x) - "+r(d(i.price))+" = ",1),t("strong",null,r(d(i.qty*i.price)),1)]))),128))])]),t("td",null,[t("strong",null,r(d(g(l.items))),1)]),t("td",null,[t("span",R,r(d(v(l.payments))),1)]),t("td",null,[t("span",T,r(d(g(l.items)-v(l.payments))),1)]),t("td",null,r(h(l.event_start))+" - "+r(h(l.event_end)),1),t("td",null,[o(c(y),{href:e.route("edit.projects",l.id),class:"mr-2"},{default:s(()=>[o(u,{type:"primary"},{default:s(()=>n[3]||(n[3]=[f("Edit")])),_:1})]),_:2},1032,["href"]),o(c(y),{href:e.route("destroy.projects",l.id),method:"delete"},{default:s(()=>[o(u,{type:"error"},{default:s(()=>n[4]||(n[4]=[f("Delete")])),_:1})]),_:2},1032,["href"]),t("div",$,[l.invoice_date?V("",!0):(a(),F(c(y),{key:0,href:e.route("projects.send-invoice",l.id),method:"post"},{default:s(()=>[o(u,{type:"info",block:""},{default:s(()=>n[5]||(n[5]=[f("Kirim Invoice")])),_:1})]),_:2},1032,["href"]))])])]))),128))])]),_:1})]),_:1})])])]),_:1})],64)}}};export{G as default};
