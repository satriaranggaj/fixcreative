import{r as J,C as O,b as m,d as f,e as v,f as l,u as n,m as G,w as s,g as o,h as K,F as j,k as N,l as T,n as B,j as y}from"./app-B6c4nCTd.js";import{_ as Q}from"./AuthenticatedLayout-BtdOzac_.js";import"./ApplicationStore-Blr9INut.js";import"./ApplicationLogo-DeqSs-SK.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserRegular-BMmSYD_P.js";import"./AppMessageListener-C_L6u0ge.js";const W={class:"py-12"},X={class:"mx-auto max-w-[90%]"},Y={class:"border p-4 rounded-md mb-4"},Z={class:"col-span-5"},ee={class:"col-span-2"},te={class:"col-span-3"},ae={class:"col-span-2 flex justify-end"},le={class:"border p-4 rounded-md mb-4"},ne={class:"col-span-3"},oe={class:"col-span-3"},se={class:"col-span-3"},re={class:"col-span-2"},de={class:"col-span-1 flex justify-end"},ue={class:"flex justify-end"},ye={__name:"Form",props:{project:Object},setup(F){var U,k,C,w,x,P,M,E,V,q;const d=F,g=J(null),a=O({client:((U=d.project)==null?void 0:U.client)??"",phone:((k=d.project)==null?void 0:k.phone)??"",email:((C=d.project)==null?void 0:C.email)??"",venue:((w=d.project)==null?void 0:w.venue)??"",address:((x=d.project)==null?void 0:x.address)??"",event_start:((P=d.project)==null?void 0:P.event_start)??null,event_end:((M=d.project)==null?void 0:M.event_end)??null,items:((E=d.project)==null?void 0:E.items)??[{name:"",qty:1,price:0}],payments:((V=d.project)==null?void 0:V.payments)??[{type:"down_payment",amount:0,payment_date:null,method:""}],description:((q=d.project)==null?void 0:q.description)??""}),I=()=>{a.payments.push({type:"installment",amount:0,payment_date:null,method:""})},A=u=>{a.payments.splice(u,1)},D={client:{required:!0,validator:(u,e)=>e?!0:new Error("Client is required")},phone:{required:!0,validator:(u,e)=>e?!0:new Error("Phone is required")},items:{validator:(u,e)=>e.length>0?!0:new Error("Minimal 1 item")}},S=()=>{a.items.push({name:"",qty:1,price:0})},H=u=>{a.items.splice(u,1)},L=()=>{var u;(u=g.value)==null||u.validate(e=>{e||(d.project?(console.log(a),a.post(route("update.projects",{project:d.project.id}))):(console.log(a),a.post(route("store.projects"))))})};return(u,e)=>{const p=m("n-input"),i=m("n-form-item"),b=m("n-date-picker"),h=m("n-input-number"),c=m("n-button"),$=m("n-select"),R=m("n-form"),z=m("n-card");return v(),f(j,null,[l(n(G),{title:"Projects"}),l(Q,null,{default:s(()=>[o("div",W,[o("div",X,[e[15]||(e[15]=o("div",{class:"flex items-center justify-between px-4"},[o("h1",{class:"text-2xl font-bold"},"Form Project")],-1)),l(z,{class:"mt-4"},{default:s(()=>[l(R,{ref_key:"formRef",ref:g,model:n(a),rules:D,onSubmit:K(L,["prevent"])},{default:s(()=>[l(i,{path:"client",label:"Client"},{default:s(()=>[l(p,{value:n(a).client,"onUpdate:value":e[0]||(e[0]=t=>n(a).client=t),placeholder:"Nama Client"},null,8,["value"])]),_:1}),l(i,{path:"phone",label:"Phone"},{default:s(()=>[l(p,{value:n(a).phone,"onUpdate:value":e[1]||(e[1]=t=>n(a).phone=t),placeholder:"Nomor Telepon"},null,8,["value"])]),_:1}),l(i,{path:"email",label:"Email"},{default:s(()=>[l(p,{value:n(a).email,"onUpdate:value":e[2]||(e[2]=t=>n(a).email=t),placeholder:"Alamat Email"},null,8,["value"])]),_:1}),l(i,{path:"venue",label:"Venue"},{default:s(()=>[l(p,{value:n(a).venue,"onUpdate:value":e[3]||(e[3]=t=>n(a).venue=t),placeholder:"Lokasi Acara"},null,8,["value"])]),_:1}),l(i,{path:"address",label:"Address"},{default:s(()=>[l(p,{value:n(a).address,"onUpdate:value":e[4]||(e[4]=t=>n(a).address=t),placeholder:"Alamat Lengkap"},null,8,["value"])]),_:1}),l(i,{path:"event_start",label:"Event Start"},{default:s(()=>[l(b,{"formatted-value":n(a).event_start,"onUpdate:formattedValue":e[5]||(e[5]=t=>n(a).event_start=t),type:"date","value-format":"yyyy-MM-dd",placeholder:"Tanggal Mulai"},null,8,["formatted-value"])]),_:1}),l(i,{path:"event_end",label:"Event End"},{default:s(()=>[l(b,{"formatted-value":n(a).event_end,"onUpdate:formattedValue":e[6]||(e[6]=t=>n(a).event_end=t),type:"date","value-format":"yyyy-MM-dd",placeholder:"Tanggal Selesai"},null,8,["formatted-value"])]),_:1}),o("div",Y,[e[10]||(e[10]=o("h2",{class:"font-semibold mb-2"},"Items",-1)),(v(!0),f(j,null,N(n(a).items,(t,_)=>(v(),f("div",{key:_,class:"grid grid-cols-12 gap-2 items-center mb-2"},[o("div",Z,[l(p,{value:t.name,"onUpdate:value":r=>t.name=r,placeholder:"Nama Paket"},null,8,["value","onUpdate:value"])]),o("div",ee,[l(h,{value:t.qty,"onUpdate:value":r=>t.qty=r,min:1,placeholder:"Day"},null,8,["value","onUpdate:value"])]),o("div",te,[l(h,{value:t.price,"onUpdate:value":r=>t.price=r,min:0,placeholder:"Harga"},null,8,["value","onUpdate:value"])]),o("div",ae,[n(a).items.length>1?(v(),T(c,{key:0,type:"error",onClick:r=>H(_)},{default:s(()=>e[8]||(e[8]=[y("Hapus")])),_:2},1032,["onClick"])):B("",!0)])]))),128)),l(c,{type:"primary",onClick:S},{default:s(()=>e[9]||(e[9]=[y("Tambah Item")])),_:1})]),o("div",le,[e[13]||(e[13]=o("h2",{class:"font-semibold mb-2"},"Payments",-1)),(v(!0),f(j,null,N(n(a).payments,(t,_)=>(v(),f("div",{key:_,class:"grid grid-cols-12 gap-2 items-center mb-2"},[o("div",ne,[l($,{value:t.type,"onUpdate:value":r=>t.type=r,options:[{label:"Down Payment",value:"down_payment"},{label:"Installment",value:"installment"},{label:"Final",value:"final"}],placeholder:"Jenis Pembayaran"},null,8,["value","onUpdate:value"])]),o("div",oe,[l(h,{value:t.amount,"onUpdate:value":r=>t.amount=r,min:0,placeholder:"Nominal"},null,8,["value","onUpdate:value"])]),o("div",se,[l(b,{"formatted-value":t.payment_date,"onUpdate:formattedValue":r=>t.payment_date=r,type:"date","value-format":"yyyy-MM-dd",placeholder:"Tanggal Bayar"},null,8,["formatted-value","onUpdate:formattedValue"])]),o("div",re,[l(p,{value:t.method,"onUpdate:value":r=>t.method=r,placeholder:"Metode"},null,8,["value","onUpdate:value"])]),o("div",de,[n(a).payments.length>1?(v(),T(c,{key:0,type:"error",onClick:r=>A(_)},{default:s(()=>e[11]||(e[11]=[y(" Hapus ")])),_:2},1032,["onClick"])):B("",!0)])]))),128)),l(c,{type:"primary",onClick:I},{default:s(()=>e[12]||(e[12]=[y("Tambah Payment")])),_:1})]),l(i,{path:"description",label:"Description"},{default:s(()=>[l(p,{value:n(a).description,"onUpdate:value":e[7]||(e[7]=t=>n(a).description=t),type:"textarea",placeholder:"Deskripsi tambahan",rows:"5"},null,8,["value"])]),_:1}),o("div",ue,[l(c,{"attr-type":"submit",type:"primary",size:"large",disabled:n(a).processing},{default:s(()=>e[14]||(e[14]=[y(" Submit ")])),_:1},8,["disabled"])])]),_:1},8,["model"])]),_:1})])])]),_:1})],64)}}};export{ye as default};
